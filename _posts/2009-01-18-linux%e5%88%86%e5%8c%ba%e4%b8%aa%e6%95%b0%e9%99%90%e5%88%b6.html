---
categories:
- Linux Kernel
date: 2009-01-18 00:58:18-08:00
layout: post
permalink: /2009/01/18/linux%e5%88%86%e5%8c%ba%e4%b8%aa%e6%95%b0%e9%99%90%e5%88%b6/
title: Linux分区个数限制
---
<p><br />

<p>在linux上，对于IDE硬盘来说，分区个数限制在63个；而对于SCSI硬盘限制在15个。</p>
<p>我们可以直接在linux内核源代码中找到证据：</p>
<p>include/linux/ide.h</p>
<p>#define PARTN_BITS      6       /* number of minor dev bits for partitions */</p>
<p>次设备号也就决定了可挂载的IDE设备不会超过63个（2^6-1，之所以减一是因为hdX本身也会占用一个）。</p>
<p>SCSI也差不多，见 drivers/scsi/sd.c</p>
<p>#if !defined(CONFIG_DEBUG_BLOCK_EXT_DEVT)<br />
#define SD_MINORS       16<br />
#else<br />
#define SD_MINORS       0<br />
#endif</p>
<p>在内核文档中也可以看到，见Documentation/devices.txt ：</p>
<p>For partitions, add to the whole disk device number:<br />
0 = /dev/hd?          Whole disk<br />
1 = /dev/hd?1         First partition<br />
2 = /dev/hd?2         Second partition<br />
...<br />
63 = /dev/hd?63        63rd partition<br />
...</p>
<p>8 block       SCSI disk devices (0-15)</p>
<p>Partitions are handled in the same way as for IDE<br />
disks (see major number 3) except that the limit on<br />
partitions is 15.</p>
<p></p>