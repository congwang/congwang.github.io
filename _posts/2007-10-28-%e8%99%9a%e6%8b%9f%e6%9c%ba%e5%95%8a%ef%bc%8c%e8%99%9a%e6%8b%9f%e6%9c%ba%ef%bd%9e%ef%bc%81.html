---
layout: post
title: 虚拟机啊，虚拟机～！
date: 2007-10-28 20:07:49.000000000 -07:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Linux Kernel
tags: []
meta:
  _publicize_pending: '1'
  original_post_id: '243'
  _wp_old_slug: '243'
author:
  login: wangcong2015
  email: wangcong@rocketmail.com
  display_name: wangcong2015
  first_name: ''
  last_name: ''
permalink: "/2007/10/28/%e8%99%9a%e6%8b%9f%e6%9c%ba%e5%95%8a%ef%bc%8c%e8%99%9a%e6%8b%9f%e6%9c%ba%ef%bd%9e%ef%bc%81/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<html><body>
<p>前一段时间不怎么走运，配了两个虚拟机都没配好，相当郁闷。</p>
<p>这两天否极泰来。Qemu在Fengguang Wu的指点下终于又跑起来了，原因还是配置内核时一些选项没有设置成y，郁闷。相当不容易啊，这次说什么不能不备份了，也顺便上传到网站上一份，可以在<a href="http://wangcong.org/down/config.bak">&lt;-这里-&gt;</a>看到。顺便说一句，FC7自带的虚拟机管理器不错，不过调试内核还是不能用它。没事玩儿的时候用用不错。而且FC7把Xen也给集成了，很强悍，可惜我还不知道怎么用它……</p>
<p>另一个虚拟机是UML，可能有不少人还不知道它，它其实是在用户空间的运行的Linux，把Linux内核放到一个用户空间进程里来跑。这两天看它的源代码时发现，其实它的中断什么的全都是用用户空间的东西模拟出来的。UML其实不需要多麻烦的配置，关键是我正好赶上UML子系统出问题（我用的是非稳定版内核），去UML用户邮件列表上发了N个邮件问Jeff，然后加了三四个patch之后，UML才总算运行起来。使用当前Linu-tree的同学可以试一下Jeff和Al的补丁[1]，以及Al的另一个补丁[2]，加这三个patch之后UML就可以顺利运行了。</p>
<p>UML其实挺好用的，而且编译迅速，以后就准备用它来测试内核了。现在一个很关键的问题是，虚拟机和主机之间的通信问题。Qemu以前弄好过，可现在又不是怎么弄了。UML还没有思路。看来又得折腾一阵子了……</p>
<p>[1] <a href="http://marc.info/?l=linux-kernel&amp;m=119332492222601&amp;q=raw" target="_blank">http://marc.info/?l=linux-kernel&amp;m=119332492222601&amp;q=raw</a></p>
<p>[2] <a href="http://lkml.org/lkml/2007/10/27/253" target="_blank">http://lkml.org/lkml/2007/10/27/253</a></p>
<p></body></html></p>
