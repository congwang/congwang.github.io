---
categories:
- Programming
date: 2009-01-20 23:41:25-08:00
layout: post
permalink: /2009/01/20/%e7%94%a8-sigaction2-%e7%9a%84%e5%8e%9f%e5%9b%a0/
title: 用 sigaction(2) 的原因
---
<p><br />
</p>
<p>Linux <a href="http://www.kernel.org/doc/man-pages/online/pages/man2/signal.2.html" target="_blank">man page中</a>提到：</p>
<blockquote><p>The behavior of signal() varies across Unix versions, and has also varied<br />
historically across different versions of Linux.  Avoid its use: use sigaction(2) instead.<br />
...<br />
The only portable use of signal() is to set a signal's disposition to SIG_DFL or SIG_IGN. The semantics when using signal() to establish a signal handler vary across systems (and POSIX.1 explicitly permits this variation); do not use it for this purpose.</p></blockquote>
<p>所以signal(2)的可移植性首先就差了一截子。还有就是，signal(2)也不能像sigaction(2)那样去屏蔽信号，<a href="http://www.opengroup.org/onlinepubs/000095399/functions/sigaction.html" target="_blank">POSIX中</a>提到：</p>
<blockquote><p>When a signal is caught by a signal-catching function installed by<br />
sigaction(), a new signal mask is calculated and installed for the<br />
duration of the signal-catching function (or until a call to either<br />
sigprocmask() or sigsuspend() is made). This mask is formed by taking<br />
the union of the current signal mask and the value of the sa_mask for<br />
the signal being delivered unless SA_NODEFER or<br />
SA_RESETHAND is set, And then including the signal being<br />
delivered. If and when the user's signal handler returns normally, the<br />
original signal mask is restored.</p></blockquote>
<p></p>