---
categories:
- Linux Application
date: 2008-01-18 23:58:35-08:00
layout: post
permalink: /2008/01/18/%e8%bf%9b%e4%b8%80%e6%ad%a5%e5%ad%a6%e4%b9%a0git/
title: 进一步学习git
---
<p><br />

<p>以前仅仅掌握了git的基本用法，对git里的很多概念还是不清楚。鉴于使用git之频繁，今天决定仔细学习一下git。</p>
<p>简单地搜了一下，发现中文的似乎就没有很深入介绍git的，都是一些基本的东西。英文教程中，最好的当然是kernel.org官方的教程，一篇详细介绍了git的概念，可以在<a href="http://www.kernel.org/pub/software/scm/git/docs/tutorial-2.html">这里</a>得到；另一篇介绍了一些更核心的东西，在<a href="http://www.kernel.org/pub/software/scm/git/docs/core-tutorial.html">这里</a>。</p>
<p>git里有两个强悍的东西，一个是object database，一个是index file。先看前面那个，所谓object database就是存放所有object的一个“数据库”，其实就是.git/objects，里面放的东西自然都是object。git里的object分四种类型：tree，blob，commit，tag。所有的object都有各自的“编号”，叫ref，就是你每次git-log时看到的里面那长长的16进制数字，比如下面这个：</p>
<p>$ git log<br />
commit 03bbe082cffc4533f6557bf23f0c672307067246<br />
Merge: 3047290... fb49161...<br />
Author: Linus Torvalds &lt;&gt;<br />
Date:   Thu Jan 17 15:50:19 2008 -0800</p>
<p>这个object的类型显然是commit。这个数字是怎么来的呢？其实就是对object的内容，时间，作者等信息进行SHA1之后得到的。如果你上网络安全课没有睡着的话，你应该知道，这玩意儿其实是为了保证数据的完整性。这样一来保证了不同的object的“编号”不会相同，二来保证了object内容和其它信息的完整。</p>
<p>我们再继续看那四个类型，commit刚才已经看到，它其实就是表示对文件的修改。而一个文件的内容被称为blob，一个目录的状态被称作tree。由此可见，commit是基于tree的，它引用它的parent，表示从这个parent这个tree到历史上另一个tree的“过程”。git-cat-file可以帮助我们查找某个object的类型，或者查看它的内容。而git-ls-tree可以帮我们查看tree的内容。tag object是一个包含tag的object，而tag通常是一个指向某个tag object或commit object的ref，所以我们可以在.git/refs里看到tags。再多说一句，在commit里面，HEAD恐怕是最有名的一个了。;-)</p>
<p>好了，我们再接着看index file。这又是个什么东西呢？也很简单，它其实是个“子虚乌有”的东西，当你对tree里的东西做了修改后，你可以git-diff查看修改，而当你再git-add之后，不带任何参数的git-diff就查不到结果了，因为修改都放到index file里去了！index file又是实实在在存在的，它在.git/index里，以二进制的形式存放。再回头来看，不带任何参数的git-diff其实比较的是index file和当前目录内容的差异。你git-commit一次其实就是把一次git-add的内容加入历史，而git-commit -a才是把所有git-add的结果加入。</p>
<p>还有什么不明白的呢？恩，head，注意，这个是小写，和上面提到的大写的那个不同。head其实应该是指某个ref，不信你看.git/refs/heads。为什么这里是叫heads呢？因为一个branch一个head，branch可能有多个，heads自然就是复数了。一般我们的heads里都有个master，看看它的内容，其实就是一个ref。</p>
<p>这样我们就对git里的概念有了个大体了解了，至少不至于连git的man pages都看不懂了。</p>
<p></p>