---
categories:
- Programming
date: 2008-09-06 19:42:17-07:00
layout: post
permalink: /2008/09/06/%e6%9f%a5%e6%b1%89%e5%ad%97%e6%8b%bc%e9%9f%b3%e7%9a%84%e7%a8%8b%e5%ba%8f/
title: 查汉字拼音的程序
---
<p><br />

<p>马克同学是我们公司的活宝，更是一个喜欢学习汉语的好青年！他自己琢磨着装上了scim，现在还可以用拼音输入法在skype上用汉语向我问好了。说起来比较囧的是，我教他的第一个汉字就是“囧”……因为这是个典型的象形字！我还郑重地告诉他，其实不少中国人自己也不知道怎么念这个字！</p>
<p>有一天喝咖啡时，马克同学问我知道了一个汉字怎么查它的拼音？问得好！在我们看来知道拼音是理所当然的，但对老外们来说确实是个问题。我搜了一下，扔给他一个供小学生使用的查拼音的在线网站。后来想想这样不太好，因为那个网站本身就是中文的……于是我用Python编了这么个小程序，打算下周上班时送给马克同学。</p>
<p>[python]<br />
#!/usr/bin/env python</p>
<p>import os,sys<br />
import string<br />
import urllib2<br />
import zipfile</p>
<p>def find_it(x, lines):<br />
	ret = []<br />
	for line in lines:<br />
		if line.find(x)!=-1:<br />
			ret.append(line.split(":")[0].strip())<br />
	return ret</p>
<p>if __name__ == '__main__':</p>
<p>	if len(sys.argv) != 2:<br />
		print "Ni hao! Chu cuo le!"<br />
		sys.exit(1)</p>
<p>	if os.getenv("LANG").upper().find("UTF8") == -1:<br />
		print "Please use UTF-8 locale!"<br />
		sys.exit(2)</p>
<p>	try:<br />
		f = open('/tmp/pinyinsfssafd.zip', 'r+')<br />
	except IOError:<br />
		req = urllib2.Request('http://blogimg.chinaunix.net/blog/upfile2/080906001029.zip')<br />
		resp = urllib2.urlopen(req)<br />
		zfile = resp.read()<br />
		f = open('/tmp/pinyinsfssafd.zip', 'w')<br />
		f.write(zfile)<br />
		f.close()<br />
	finally:<br />
		z = zipfile.ZipFile("/tmp/pinyinsfssafd.zip", "r")<br />
		bytes = z.read('pinyin.txt')<br />
		lines = bytes.split('rn')</p>
<p>		x = sys.argv[1]<br />
		for c in x.decode('utf-8'):<br />
			if c == u'-':<br />
				continue<br />
			if c in string.letters:<br />
				continue<br />
			if c in string.digits:<br />
				continue<br />
			ret = find_it(c.encode('utf-8'), lines)<br />
			if ret:<br />
				print c+" can be read as : "+'/'.join(ret)<br />
		z.close()</p>
<p>[/python] </p>
<p></p>